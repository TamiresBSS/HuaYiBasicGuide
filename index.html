<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <link rel="stylesheet" href="style.css">

    <title>Codinome Flower</title>
</head>
<body onload="onLoad()">
    <header>
        <div>
            <h1 class="shdw">Hua Yi Shan Xin Zhi Yue</h1>
            <p id="subTitle" class="shdw">Jogo criado pela Nuverse</p><br>
            <h3 id="desc" class="shdw">Guia Básico feito por um fã para fãs. Tradução feita via Google Tradutor</h3>
            
        </div>
        <div class="language">
            <select name="listlanguages" onchange="langSelectChange(this)">
            </select>
        </div>
    </header>
	   <script type="text/javascript">
        var multilang;

        function onLoad() {

            if (!location.hash || location.hash == "#pt") {
                multilang = new MultiLang('languages.json', 'pt', this.initList);
                window.location.assign("#pt");
            } else {
                multilang = new MultiLang('languages.json', 'en', this.initList);
                window.location.assign("#en");
            }

            }

        function langSelectChange(sel) {
            multilang.setLanguage(sel.value);
            //Location assigned to Current Lang
            var newpath = "#"+ sel.value;
            window.location.assign(newpath)
            
            refreshLabels();
        }

        function initList() {
            var list = document.getElementsByName("listlanguages")[0];
            list.options.length = 0;
            for (var key in multilang.phrases) {

                var lang = document.createElement("option");
                lang.value = key;
                lang.innerHTML = multilang.phrases[key]['langdesc'];
                list.appendChild(lang);
            }
            refreshLabels();
        }

        function refreshLabels() {
            var allnodes = document.body.getElementsByTagName("*");

            for (var i = 0, max = allnodes.length; i < max; i++) {
                var idname = allnodes[i].id;
                if (idname != '') {
                    allnodes[i].textContent = multilang.get(idname);
                };
            };
        }
    </script>
    <script type="text/javascript" src="multilang.js"></script>
</body>
</html>